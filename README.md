![演示](https://github.com/user-attachments/assets/c5d44e2b-6921-4628-ac05-62ee30bb455c)

# **部署流程**

**第一步：构建镜像**
在项目根目录手动执行构建：
```bash
docker build -t movie-app .
```

**第二步：运行容器**
使用 Docker Compose 启动：
```bash
docker-compose up -d
```
使用命令（可选配置 Redis）：
```bash
docker run -d \
  -p 8686:3000 \
  --name movie-app \
  -e JWT_SECRET='video!@#$%' \
  -e REDIS_URL='redis://admin:123456@127.0.0.7:6379/6' \
  movie-app:latest
```

---

**第三步：Redis 配置说明**

| 字段（Field）       | 类型（Type） | 说明 & 示例值                                                                 |
|--------------------|--------------|-----------------------------------------------------------------------------|
| `video:password`   | String       | 视频服务访问密码 示例：`66888`|
| `video:source`     | String       | 视频源配置（JSON 格式），具体结构如下|

```json
[
    {
        "key": "ikunzy",
        "name": "爱坤资源",
        "url": "https://xxx.com/api.php/provide/vod/from/ikm3u8/at/json",
        "desc": "较新资源站，带宽充足，画质较好（主打清晰度）。"
    },
    {
        "key": "bdzy",
        "name": "百度资源",
        "url": "https://xxx.com/api.php/provide/vod/from/dbm3u8/at/json/",
        "desc": "老牌劲旅，资源库庞大且稳定，覆盖老片较多。"
    }
]
``` 

#### 配置说明补充
1. `key`：视频源唯一标识；
2. `name`：视频源名称；
3. `url`：视频源接口地址（需确保可正常访问，返回标准 JSON 格式）；
4. `desc`：视频源描述

---

# 更新日志
- **v1.52**
  - 修复页面隐藏（切换标签页、最小化、锁屏等）时，播放器会被销毁，导致播放黑屏
  - 新增搜索历史、播放记录功能，数据存在浏览器缓存里
  - 新增支持从播放记录里面续播，提升用户体验

- **v1.51**
  - 点击视频时，若无播放地址（vod_play_url为空），显示提示并阻止进入播放页面
  
- **v1.5**
  - 优化重构整体逻辑
  - 不再强依赖 Redis，支持无 Redis 环境下正常运行（仅在提供 `REDIS_URL` 时启用 Redis 功能）

- **v1.43**
  - 优化交互体验
    - 优化搜索功能：可以选择部分源进行搜索
  - 修复已知bug：
    - 修复某些源没有按照指定的播放器类型返回数据，导致播放识别的问题
    - 修复页面切换原视频仍在播放的问题
    - 尝试修复某些源请求失败的问题
  - 优化逻辑细节

- **v1.42**
  - 优化播放器样式
  - 修复已知bug：
    - 视频列表翻页失效

- **v1.41**
  - 优化日志显示
  - 密码错误弹出来小丑表情包
  - 访问密码可以在redis里设置
  - 修复已知bug：
    - redis失败会一直重试，直到成功

- **v1.4**
  - 页面组件化
  - 添加路由功能，方便分享收藏
  - 修复已知bug
  - 优化交互体验

- **v1.3**
  - 优化交互体验

- **v1.2**
  - 修复ios端将网页添加为应用后，无法全屏的问题
  - 优化交互体验

- **v1.1**
  - 完善功能，修复bug
  - 优化交互体验
  - 支持docker部署

- **v1.0**
  - 初步实现功能
